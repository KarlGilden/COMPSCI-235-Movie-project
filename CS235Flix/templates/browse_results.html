{% extends 'base.html' %}

{% block body %}

<div class="browse-container">
    {% if search_query == '' and setting != None %}
    <p>Showing all movies ({{ setting }})</p>
    {% elif search_query != None and setting != None %}
    <p>Showing {{ setting }} movies for {{ search_query }}</p>
    {% else %}
    <p>Showing results for {{ search_query }}</p>
    {% endif %}

    {% if type %}
    <div class="movies">
    {% for movie in movies[page] %}
        <a class="movie" href="{{ url_for('movies_bp.view_movie', movie_id=movie.id) }} ">
            <div class="movie-img">
                <img src="{{ movie.image_url }}" alt="Unable to load image">
            </div>
            <p class="movie-name">{{ movie.title }} &lt;{{ movie.release_year }}&gt;</p>
        </a>
    {% endfor %}
    </div>
    {% else %}
    <p>{{ movies }}</p>
    {% endif %}
</div>
<div class="footer">
    <ul class="pagenums">
        {% if page - 1 >= 0 %}
        <a class="prevnext" href="{{ url_for('movies_bp.results', page=page - 1, setting=setting, search=search_query) }}">Prev</a>
        {% endif %}
        {% for i in range(numpages) %}
        {% if i == page %}
        <a class="curr-pagenum" href="{{ url_for('movies_bp.results', page=i, setting=setting, search=search_query) }}">{{ i + 1 }}</a>
        {% else %}
        <a class="pagenum" href="{{ url_for('movies_bp.results', page=i, setting=setting, search=search_query) }}">{{ i + 1 }}</a>
        {% endif %}
        {% endfor %}
        {% if page + 1 < numpages %}
        <a class="prevnext" href="{{ url_for('movies_bp.results', page=page + 1, setting=setting, search=search_query) }}">Next</a>
        {% endif %}
    </ul>
    
</div>


{% endblock %}